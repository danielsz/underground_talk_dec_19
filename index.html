<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Ruby metaprogramming from scratch</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/stylesheet.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none">
  <div class="content" ref="one/01_slide/1">
<p><link href="http://fonts.googleapis.com/css?family=Squada+One|Galdeano" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Ubuntu+Mono|Droid+Sans+Mono" rel="stylesheet" type="text/css"/>

<h1>Metaprogramming from scratch</h1></link>
</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/2">
<p>Meta- (from Greek: &#x3BC;&#x3B5;&#x3C4;&#x3AC; = "after", "beyond", "adjacent", "self"), is a prefix used in English (and other Greek-owing languages) to indicate a concept which is an abstraction from another concept, used to complete or add to the latter.</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/3">
<center><img src="./file/one/aristotle_pic.jpg" width="550" height="380"/>


</center>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="one/01_slide/4">
<ul>
<li>Programs that write programs</li>
<li>Program that knows how to deal with its own language constructs at runtime</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="one/01_slide/5">
<ul>
<li>Whatsinitforme?</li>
<li>I code for a living. Do I really need to learn these things? I have kids, you know.</li>
<li>Frameworks, libraries, DSLs, etc.</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/6">
<pre class="sh_ruby"><code>a.b</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/7">
<p>Equivalent to:</p>

<pre class="sh_ruby"><code>a.b()</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="one/01_slide/8">
<pre><code><code class="command"># Link to github page: https://github.com/danielsz/Metaprogramming</code>
<code class="command">$ git clone git@github.com:danielsz/Metaprogramming.git</code>
<code class="command">$ git clone https://github.com/danielsz/Metaprogramming.git</code>
</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/9">
<p>Exercice 1: Make it compile</p>

<pre class="sh_ruby"><code>  class Person  

    def name 
    end

    def name=()
    end
  end

  person = Person.new("Ronald")
  p person.name
  person.name = "Mike"
  p person.name</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/10">
<pre class="sh_ruby"><code>class Person
   attr_accessor :name
end
person = Person.new
person.name = "Mike"
p person.name</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/11">
<pre class="sh_ruby"><code>   Class.method(:attr_accessor).owner</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/12">
<pre class="sh_ruby"><code>   Class.ancestors</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/13">
<p>Classes are objects</p>

<pre class="sh_ruby"><code>a=Class.new 
a.name</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/14">
<pre class="sh_ruby"><code>a=Class.new
Person=a
a.name</code></pre>

<p>The new class begins as an anonymous Class instance, but becomes a named class when it's assigned to a constant.</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/15">
<p>Equivalent to:</p>

<pre class="sh_ruby"><code>class Person
end</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/16">
<pre class="sh_ruby"><code>   class Person
     p "hi"
   end</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/17">
<pre class="sh_ruby"><code>   class Person
         def say_something;  "hi";  end
   end

   person = Person.new       

   class Person
         def say_something;  "bye";  end
   end

   person.say_something</code></pre>

<p>In Ruby, the term monkey patch is often used as a synonym for dynamically modifying any class at runtime.</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/18">
<pre class="sh_ruby"><code>a.b</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/19">
<pre class="sh_ruby"><code>class Person
   attr_accessor :name
end</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/20">
<pre class="sh_ruby"><code>   class Person
     p self      
   end 
   p self</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/21">
<pre class="sh_ruby"><code>   class Person
     def self.speak
       #I'm a class method, 
   #or rather a singleton method 
   #on the Class instance that represents Person
     end   
     def speak
       #I'm an instance method
     end
   end
   [Person.singleton_methods, Person.instance_methods]</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/22">
<pre class="sh_ruby"><code>module Features
  def talk
    "hi"
  end  
end
class Person; end
Person.extend Features
Person.talk</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/23">
<pre class="sh_ruby"><code>   class SomeClass
     define_method :some_method do Math::PI end
   end
   SomeClass.new.some_method</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/24">
<p>Exercise 2: Make it compile!</p>

<pre class="sh_ruby"><code>module Features
   def my_attr()
  end
end

class Person
   extend Features
   my_attr :name
end</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets" ref="one/01_slide/25">
<ul>
<li>Metaprogramming is just programming.</li>
<li>The key to understand programming in Ruby is to understand its object model.</li>
<li>The key to undestand the object model in Ruby is to study... Smalltalk.</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content smbullets" ref="one/01_slide/26">
<p>The design of the Smalltalk object model is based on a set of simple rules that are applied uniformly.
The rules are the following ones:</p>

<ul>
<li>Rule 1. Everything is an object that has some private data.</li>
<li>Rule 2. Every object is an instance of a class.</li>
<li>Rule 3. A class de&#xFB01;nes the behavior via public methods and the structure of its instances via instance variables which are private to the instances.</li>
<li>Rule 4. Each class is inheriting its behavior and structure description from a single superclass.</li>
<li>Rule 5. Objects only communicate via message passing (i.e., method invocation). When an object receives a message, the corresponding method is looked up in the class of the receiver, then if not found on this class continues in the class&#x2019;s superclasses.</li>
<li>Rule 6. The class Object is the root of the inheritance tree (in Squeak this is ProtoObject the class that represents objects understanding the smallest set of messages).</li>
<li>Rule 7. Classes are instances too. They are instances of other classes called metaclasses.</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/27">
<p>Dynamic dispatch: messages are sent to a receiver, resolution at runtime</p></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/28">
<p>Everything is an object.</p>

<pre class="sh_ruby"><code>["hello", 3, Class, method(:p)].map {|x| x.class}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/29">
<p>State and behavior</p>

<p>An object has instance variables (state) and an associated class (behavior)
The class is a table of methods
Instance variables are private
Classes are open.</p></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/30">
<p>Write a method that writes a method.</p>

<pre class="sh_ruby"><code>    class Person
      def one
          def two
          end
      end     
    end   

person = Person.new
person.two      </code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="one/01_slide/31">
<p>define_method</p>

<pre class="sh_ruby"><code>class Person
      def one
      end
      define_method :two do;end
 end

 person = Person.new
 person.two</code></pre></div>
</div></div>

</body>
</html>
